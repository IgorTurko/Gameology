{"version":3,"sources":["webpack:///webpack/bootstrap 9cc8d2ada5fce0b7381b?eb9d","webpack:///./server/extensions.ts?ae9b","webpack:///./server/data-access/db.ts?18e6","webpack:///external \"mongodb\"?b417","webpack:///./server/config.ts?3359","webpack:///external \"fs\"?2e09","webpack:///./server/services/web-shop/mongo-web-shop-storage.ts?b520","webpack:///./server/services/web-shop/web-shop-service.ts?f33b","webpack:///./server/services/web-shop/web-shop-validator.ts?c231","webpack:///external \"pojo-fluent-validator\"?abc9","webpack:///./server/services/utils.ts?13f9","webpack:///./server/services/products/mongo-product-storage.ts?6176","webpack:///./server/services/products/product-service.ts?f90a","webpack:///external \"node-uuid\"?fdd4","webpack:///./server/services/event-bus.ts?902d","webpack:///external \"events\"?c68f","webpack:///./server/services/products/product-validator.ts?7973","webpack:///./server-test/test-parsing/run-page-parsing.ts","webpack:///./server/services/scraping/scrape-service.ts","webpack:///./server/scrapers/jsdom-scraper.ts","webpack:///external \"jsdom\"","webpack:///external \"debug\"","webpack:///./server/scrapers/value-parser.ts","webpack:///external \"path\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA,yDAAwD,YAAY,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA,UAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC,8BAA6B,0BAA0B,EAAE,EAAE;AAC3D;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,kCAAkC,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AC9CA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;;;;;;;ACNA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,iBAAiB,GAAG,SAAS,EAAE,EAAE;AACjE,iCAAgC,oBAAoB,EAAE;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,gBAAgB,SAAS,GAAG,SAAS,EAAE,EAAE;AACzE,iCAAgC,0BAA0B,EAAE;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS,EAAE,EAAE;AACb,gCAA+B,gBAAgB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA,UAAS;AACT;AACA,UAAS,EAAE,EAAE;AACb,gCAA+B,gBAAgB,EAAE;AACjD;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC;AACtC;AACA,gCAA+B,8BAA8B,EAAE,EAAE,EAAE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,8BAA8B,EAAE;AAC/D;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAqE,gCAAgC;AACrG,+BAA8B,oDAAoD;AAClF,yCAAwC,4BAA4B,EAAE,GAAG,2DAA2D;AACpI,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;ACrBA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,iBAAiB,GAAG,SAAS,EAAE,EAAE;AACjE,iCAAgC,oBAAoB,EAAE;AACtD;AACA;AACA;AACA;AACA,iCAAgC,gBAAgB,SAAS,gCAAgC,EAAE,GAAG,SAAS,EAAE,EAAE;AAC3G;AACA;AACA,uDAAsD,mEAAmE,EAAE;AAC3H,iCAAgC,oBAAoB,EAAE;AACtD;AACA;AACA,uDAAsD,uBAAuB,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,gBAAgB,SAAS,GAAG,SAAS,EAAE,EAAE;AACzE,iCAAgC,mBAAmB,EAAE;AACrD,iCAAgC,iBAAiB,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,gBAAgB,eAAe,GAAG,SAAS,EAAE,EAAE;AAC/E,iCAAgC,mBAAmB,EAAE;AACrD,iCAAgC,iBAAiB,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS,EAAE,EAAE;AACb,gCAA+B,gBAAgB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,+BAA8B;AAC9B;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA,UAAS;AACT,gCAA+B,UAAU,WAAW,EAAE,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,qBAAqB,gBAAgB,EAAE,EAAE;AACzE,iCAAgC,aAAa,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA,UAAS;AACT,2BAA0B;AAC1B;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS,EAAE,QAAQ,EAAE;AACrB,iCAAgC,6BAA6B,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,IAAI;AACb;AACA;AACA,iCAAgC,qBAAqB,gBAAgB,GAAG,gBAAgB,EAAE,EAAE;AAC5F;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,aAAa;AAC7C,+BAA8B,UAAU;AACxC,kCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA,gGAA+F,UAAU,iEAAiE,EAAE,EAAE;AAC9K,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,oCAAmC,wDAAwD,EAAE;AAC7F;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,sBAAqB;AACrB;AACA,oDAAmD,sCAAsC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,oCAAmC,sCAAsC,EAAE;AAC3E,UAAS;AACT;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AC/HA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;ACpBA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA8D,yCAAyC;AACvG;AACA,4BAA2B,4CAA4C;AACvE,qCAAoC,wBAAwB,EAAE,GAAG,yCAAyC;AAC1G,uHAAsH,gFAAgF,EAAE,GAAG,4DAA4D;AACvQ,0CAAyC,iCAAiC,EAAE;AAC5E,0CAAyC;AACzC,yCAAwC,qBAAqB,EAAE;AAC/D,yCAAwC,qCAAqC,EAAE;AAC/E,6BAA4B,EAAE,GAAG,+DAA+D;AAChG,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,yBAAwB,gFAAgF;AACxG,qCAAoC,4BAA4B,EAAE,GAAG,8EAA8E;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D,2EAA2E,EAAE;AACvI,UAAS;AACT;AACA,MAAK;AACL,EAAC;AACD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,EAAC;;;;;;;AClCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,mCAAmC,aAAa,EAAE,EAAE,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,iCAAgC,+BAA+B,oBAAoB,EAAE,gBAAgB,wBAAwB,EAAE,EAAE,EAAE;AACnI;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,wCAAuC;AACvC,6CAA4C,UAAU,qDAAqD,EAAE,EAAE,EAAE,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA,6CAA4C;AAC5C;AACA,gCAA+B,sBAAsB,EAAE,EAAE,EAAE,kBAAkB;AAC7E;AACA,gCAA+B,2BAA2B,EAAE,EAAE,EAAE;AAChE;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA,0DAAyD;AACzD;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAAyE,qCAAqC;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AChIA;;;;;;ACAA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;;;;;;;AC5BA","file":"run-page-parsing.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9cc8d2ada5fce0b7381b","/// <reference path=\"typings/index.d.ts\" />\nif (!Array.prototype.toHash) {\n    Array.prototype.toHash = function toHash(keySelector, valueSelector) {\n        valueSelector = valueSelector || (function (e) { return (e); });\n        return this.reduce(function (hash, elem) {\n            var key = keySelector(elem);\n            var value = valueSelector(elem);\n            hash[key] = value;\n            return hash;\n        }, {});\n    };\n}\nif (!Array.prototype.min) {\n    Array.prototype.min = function min(selector) {\n        var self = this;\n        if (!self.length) {\n            return null;\n        }\n        var minElement = self[0];\n        var minValue = selector(minElement);\n        for (var i = 1; i < self.length; i++) {\n            var element = self[i];\n            var value = selector(element);\n            if (value < minValue) {\n                minValue = value;\n                minElement = element;\n            }\n        }\n        return minElement;\n    };\n}\nif (!Array.prototype.max) {\n    Array.prototype.max = function min(selector) {\n        var self = this;\n        if (!self.length) {\n            return null;\n        }\n        var maxElement = self[0];\n        var maxValue = selector(maxElement);\n        for (var i = 1; i < self.length; i++) {\n            var element = self[i];\n            var value = selector(element);\n            if (value > maxValue) {\n                maxValue = value;\n                maxElement = element;\n            }\n        }\n        return maxElement;\n    };\n}\nif (!Object.entries) {\n    Object.entries = function (obj) { return Object.keys(obj)\n        .map(function (key) { return ([key, obj[key]]); }); };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/extensions.ts\n// module id = 1\n// module chunks = 0 1","\"use strict\";\n/// <reference path=\"../typings/index.d.ts\" />\nvar mongo = require(\"mongodb\");\nvar config_1 = require(\"../config\");\nvar connectionString = config_1.default.mongoUrl;\nvar db = new Promise(function (resolve, reject) {\n    if (process.env.OPENSHIFT_MONGODB_DB_PASSWORD) {\n        connectionString = process.env.OPENSHIFT_MONGODB_DB_USERNAME + \":\" +\n            process.env.OPENSHIFT_MONGODB_DB_PASSWORD + \"@\" +\n            process.env.OPENSHIFT_MONGODB_DB_HOST + ':' +\n            process.env.OPENSHIFT_MONGODB_DB_PORT + '/' +\n            process.env.OPENSHIFT_APP_NAME;\n    }\n    mongo.MongoClient.connect('mongodb://' + connectionString, function (err, db) {\n        if (err) {\n            reject(err);\n        }\n        else {\n            console.info(\"Connected to Mongo server at \" + connectionString);\n            resolve(db);\n        }\n    });\n});\nvar Database = (function () {\n    function Database() {\n    }\n    Database.prototype.collection = function (collection) {\n        if (!collection)\n            throw new Error(\"collection is undefined\");\n        if (!Database.Collections[collection])\n            throw new Error(\"Collection \" + collection + \" is unknown\");\n        return this.connect()\n            .then(function (db) { return db.collection(collection); });\n    };\n    Database.prototype.connect = function () {\n        return db;\n    };\n    Database.Collections = {\n        sessions: \"sessions\",\n        webshops: \"webshops\",\n        products: \"products\",\n        users: \"users\"\n    };\n    return Database;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Database;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/data-access/db.ts\n// module id = 3\n// module chunks = 0 1","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 4\n// module chunks = 0 1","\"use strict\";\n/// <reference path=\"typings/index.d.ts\"/>\nvar fs = require(\"fs\");\nvar configContent = fs.readFileSync(\"./config.json\", \"utf8\");\nvar configuration = JSON.parse(configContent);\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = configuration;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/config.ts\n// module id = 5\n// module chunks = 0 1","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 6\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\"use strict\";\nvar db_1 = require(\"../../data-access/db\");\nvar MongoWebShopStorage = (function () {\n    function MongoWebShopStorage(db) {\n        this.db = db;\n        if (!db)\n            throw new Error(\"db is undefined\");\n    }\n    MongoWebShopStorage.prototype.all = function () {\n        return this.db\n            .collection(db_1.default.Collections.webshops)\n            .then(function (c) { return c.find({}, { _id: 0 }); })\n            .then(function (c) { return c.toArray(); });\n    };\n    MongoWebShopStorage.prototype.one = function (id) {\n        if (!id)\n            throw new Error(\"id is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.webshops)\n            .then(function (c) { return c.find({ id: id }, { _id: 0 }); })\n            .then(function (c) { return c.limit(1).next(); });\n    };\n    MongoWebShopStorage.prototype.save = function (webShop) {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.webshops)\n            .then(function (c) { return c.updateOne({\n            id: webShop.id\n        }, {\n            $set: {\n                deliveryPrice: webShop.deliveryPrice\n            }\n        }); })\n            .then(function () { return webShop; });\n    };\n    MongoWebShopStorage.prototype.put = function (webShop) {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.webshops)\n            .then(function (c) { return c.updateOne({\n            id: webShop.id\n        }, webShop, {\n            upsert: true\n        }); })\n            .then(function () { return webShop; });\n    };\n    return MongoWebShopStorage;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = MongoWebShopStorage;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/web-shop/mongo-web-shop-storage.ts\n// module id = 7\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\"use strict\";\nvar web_shop_validator_1 = require(\"./web-shop-validator\");\nvar WebShopService = (function () {\n    function WebShopService(storage) {\n        this.storage = storage;\n        this.validator = new web_shop_validator_1.default();\n        if (!storage)\n            throw new Error(\"storage is undefined\");\n    }\n    WebShopService.prototype.all = function () {\n        return this.storage.all();\n    };\n    WebShopService.prototype.one = function (webShopId) {\n        if (!webShopId)\n            throw new Error(\"webShopId is undefined\");\n        return this.storage.one(webShopId);\n    };\n    WebShopService.prototype.save = function (webShop) {\n        var _this = this;\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n        return this.validator\n            .validate(webShop)\n            .then(function (webShop) { return _this.storage\n            .save(webShop)\n            .then(function () { return _this.one(webShop.id); }); });\n    };\n    WebShopService.prototype.put = function (webShop) {\n        var _this = this;\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n        return this.storage\n            .put(webShop)\n            .then(function () { return _this.one(webShop.id); })\n            .catch(function (err) {\n            throw {\n                \"\": \"\" + err\n            };\n        });\n    };\n    return WebShopService;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = WebShopService;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/web-shop/web-shop-service.ts\n// module id = 8\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\"use strict\";\nvar pojo_fluent_validator_1 = require(\"pojo-fluent-validator\");\nvar utils_1 = require(\"../utils\");\nvar WebShopValidator = (function () {\n    function WebShopValidator() {\n        /** Only updateable fields is validated */\n        this.validator = pojo_fluent_validator_1.rules.obj({\n            deliveryPrice: pojo_fluent_validator_1.rules.num(false, { errorMessage: \"Invalid price\" })\n                .parseNumber({ errorMessage: \"Price is not recognized as number\" })\n                .must(function (price) { return !price || price > 0; }, { errorMessage: \"Delivery price must be greater than zero\" })\n        }).expandable();\n    }\n    WebShopValidator.prototype.validate = function (webShop) {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n        return utils_1.validate(webShop, this.validator);\n    };\n    return WebShopValidator;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = WebShopValidator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/web-shop/web-shop-validator.ts\n// module id = 9\n// module chunks = 0 1","module.exports = require(\"pojo-fluent-validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pojo-fluent-validator\"\n// module id = 10\n// module chunks = 0 1","/// <reference path=\"../typings/index.d.ts\" />\n\"use strict\";\nvar pojo_fluent_validator_1 = require(\"pojo-fluent-validator\");\nfunction validate(value) {\n    var validators = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        validators[_i - 1] = arguments[_i];\n    }\n    if (!validators || !validators.length) {\n        throw new Error(\"At least one validator is required\");\n    }\n    return new Promise(function (resolve, reject) {\n        pojo_fluent_validator_1.validate.apply(void 0, [value, function (errors, result) {\n            if (errors) {\n                reject(errors);\n            }\n            else {\n                resolve(result);\n            }\n            ;\n        }].concat(validators));\n    });\n}\nexports.validate = validate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/utils.ts\n// module id = 11\n// module chunks = 0 1","\"use strict\";\nvar db_1 = require(\"../../data-access/db\");\nvar MongoProductStorage = (function () {\n    function MongoProductStorage(db) {\n        this.db = db;\n        if (!db)\n            throw new Error(\"db is missing\");\n    }\n    MongoProductStorage.prototype.all = function () {\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.find({}, { _id: 0 }); })\n            .then(function (c) { return c.toArray(); });\n    };\n    MongoProductStorage.prototype.search = function (search) {\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.find({ title: { $regex: search, $options: \"i\" } }, { _id: 0 }); });\n    };\n    MongoProductStorage.prototype.paginate = function (search, page, perPage) {\n        return this.search(search).then(function (c) { return c.skip(page > 1 ? (page - 1) * perPage : 0).limit(perPage); })\n            .then(function (c) { return c.toArray(); });\n    };\n    MongoProductStorage.prototype.count = function (search) {\n        return this.search(search).then(function (c) { return c.count(false); });\n    };\n    MongoProductStorage.prototype.one = function (id) {\n        if (!id)\n            throw new Error(\"id is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.find({ id: id }, { _id: 0 }); })\n            .then(function (c) { return c.limit(1); })\n            .then(function (c) { return c.next(); });\n    };\n    MongoProductStorage.prototype.findByTitle = function (title) {\n        if (!title)\n            return Promise.reject(\"Title is empty\");\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.find({ title: title }, { _id: 0 }); })\n            .then(function (c) { return c.limit(1); })\n            .then(function (c) { return c.next(); });\n    };\n    MongoProductStorage.prototype.save = function (product) {\n        if (!product)\n            throw new Error(\"product is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.updateOne({\n            id: product.id\n        }, {\n            $set: {\n                id: product.id,\n                title: product.title,\n                scrapingUrls: product.scrapingUrls\n            }\n        }, {\n            upsert: true\n        }); })\n            .then(function () { return product; });\n    };\n    MongoProductStorage.prototype.savePrice = function (productId, shopId, price) {\n        if (!productId)\n            throw new Error(\"product id is undefined\");\n        if (!productId)\n            throw new Error(\"product id is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) {\n            c.update({\n                id: productId\n            }, {\n                $set: (_a = {},\n                    _a[\"values.\" + shopId + \".manualPrice\"] = price,\n                    _a\n                )\n            }, {\n                upsert: true\n            });\n            var _a;\n        })\n            .then(function () { return ({ ok: true }); });\n    };\n    MongoProductStorage.prototype.delete = function (productId) {\n        if (!productId)\n            throw new Error(\"Product ID is not defined.\");\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.deleteOne({ id: productId }); })\n            .then(function (c) { return true; });\n    };\n    MongoProductStorage.prototype.setScrapingData = function (productId, webShopId, values) {\n        var _this = this;\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n        if (!webShopId)\n            throw new Error(\"webShopId is undefined\");\n        if (!values)\n            throw new Error(\"values is undefined\");\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.updateOne({\n            id: productId\n        }, {\n            $set: (_a = {},\n                _a[\"values.\" + webShopId] = values,\n                _a\n            )\n        }, {\n            upsert: true\n        }); var _a; })\n            .then(function (r) { return _this.one(productId); });\n    };\n    MongoProductStorage.prototype.discardScrapingData = function (productId, shops) {\n        if (!shops || !shops.length) {\n            return;\n        }\n        var unset = shops.reduce(function (val, shopId) {\n            val[(\"log.\" + shopId)] = \"\";\n            val[(\"values.\" + shopId)] = \"\";\n            return val;\n        }, {});\n        return this.db\n            .collection(db_1.default.Collections.products)\n            .then(function (c) { return c.updateOne({ id: productId }, { $unset: unset }); });\n    };\n    return MongoProductStorage;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = MongoProductStorage;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/products/mongo-product-storage.ts\n// module id = 12\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\"use strict\";\nvar uuid = require(\"node-uuid\");\nvar event_bus_1 = require(\"../event-bus\");\nvar product_validator_1 = require(\"./product-validator\");\nvar ProductService = (function () {\n    function ProductService(storage) {\n        this.storage = storage;\n        this.validator = new product_validator_1.ProductValidator();\n        if (!storage)\n            throw new Error(\"storage is undefined\");\n    }\n    ProductService.prototype.all = function () {\n        return this.storage.all();\n    };\n    ProductService.prototype.paginate = function (search, page, perPage) {\n        var _this = this;\n        if (search === void 0) { search = \"\"; }\n        if (page === void 0) { page = 1; }\n        if (perPage === void 0) { perPage = 20; }\n        return this.storage.count(search).then(function (count) {\n            var realPage = page >= 1 ? page : 1;\n            var totalPages = count % perPage ? Math.floor(count / perPage) + 1 : count / perPage;\n            var currentPage = realPage > totalPages ? totalPages : realPage;\n            return _this.storage.paginate(search, currentPage, perPage).then(function (items) { return ({ items: items, totalPages: totalPages, currentPage: currentPage }); });\n        });\n    };\n    ProductService.prototype.save = function (product) {\n        var _this = this;\n        if (!product)\n            throw new Error(\"product is undefined\");\n        if (!product.id)\n            product.id = uuid.v1();\n        return this.validator\n            .validate(product)\n            .then(function (product) {\n            return _this.storage\n                .findByTitle(product.title)\n                .then(function (found) {\n                if (found && found.id !== product.id) {\n                    throw {\n                        \"title\": [\"Product with such title already exists\"]\n                    };\n                }\n            })\n                .then(function () { return _this.writeProductAndDiscardScrapeData(product); })\n                .then(function (product) {\n                event_bus_1.eventBus.emit(event_bus_1.EventNames.ProductUpdated, product.id);\n                return product;\n            });\n        });\n    };\n    ProductService.prototype.savePrice = function (productId, shopId, price) {\n        var _this = this;\n        if (!productId)\n            throw new Error(\"product id is undefined\");\n        if (!shopId)\n            throw new Error(\"shop id is undefined\");\n        var priceValidator = new product_validator_1.PriceValidator();\n        return priceValidator\n            .validate(price)\n            .then(function (r) {\n            return _this.storage.savePrice(productId, shopId, r);\n        });\n    };\n    ProductService.prototype.one = function (productId) {\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n        return this.storage.one(productId);\n    };\n    ProductService.prototype.findByTitle = function (title) {\n        return this.storage.findByTitle(title);\n    };\n    ProductService.prototype.updateScrapedData = function (productId, webshopId, data) {\n        var _this = this;\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n        if (!webshopId)\n            throw new Error(\"webShopId is undefined\");\n        if (!data)\n            throw new Error(\"data is undefined\");\n        return this.one(productId)\n            .then(function (product) {\n            return _this.storage.setScrapingData(product.id, webshopId, data);\n        });\n    };\n    ProductService.prototype.delete = function (productId) {\n        if (!productId)\n            throw new Error(\"Product ID is not defined.\");\n        return this.storage.delete(productId);\n    };\n    /**\n     * Writes validated product to storage and removes values and logs for changed URL.\n     */\n    ProductService.prototype.writeProductAndDiscardScrapeData = function (product) {\n        var _this = this;\n        return this.one(product.id)\n            .then(function (origin) {\n            return _this.storage\n                .save(product)\n                .then(function () {\n                if (origin) {\n                    var shops = Object.entries(product.scrapingUrls)\n                        .filter(function (_a) {\n                        var shop = _a[0], url = _a[1];\n                        var originUrl = origin.scrapingUrls[shop];\n                        return url !== originUrl;\n                    })\n                        .map(function (_a) {\n                        var shop = _a[0], url = _a[1];\n                        return shop;\n                    });\n                    var removedShops = Object.keys(origin.scrapingUrls)\n                        .filter(function (shopId) { return !product.scrapingUrls[shopId]; });\n                    shops.push.apply(shops, removedShops);\n                    return _this.storage.discardScrapingData(product.id, shops);\n                }\n                else {\n                    return Promise.resolve();\n                }\n            })\n                .then(function () { return _this.storage.one(product.id); });\n        });\n    };\n    return ProductService;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = ProductService;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/products/product-service.ts\n// module id = 13\n// module chunks = 0 1","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 14\n// module chunks = 0 1","/// <reference path=\"../typings/index.d.ts\"/>\n\"use strict\";\nvar events_1 = require(\"events\");\nvar EventNames = (function () {\n    function EventNames() {\n    }\n    /**\n     * Published when product inserted or updated.\n     * Params is product id: string.\n     */\n    EventNames.ProductUpdated = \"product-updated\";\n    /**\n     * Published when product data is scraped.\n     * Param is product id: string.\n     */\n    EventNames.ProductScraped = \"product-scraped\";\n    return EventNames;\n}());\nexports.EventNames = EventNames;\nvar eventBus = new events_1.EventEmitter();\nexports.eventBus = eventBus;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/event-bus.ts\n// module id = 15\n// module chunks = 0 1","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 16\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\"use strict\";\nvar pojo_fluent_validator_1 = require(\"pojo-fluent-validator\");\nvar utils_1 = require(\"../utils\");\nvar ProductValidator = (function () {\n    function ProductValidator() {\n        this.validator = pojo_fluent_validator_1.rules.obj({\n            id: pojo_fluent_validator_1.rules.str().notEmpty({ errorMessage: \"Product ID is required\" }),\n            title: pojo_fluent_validator_1.rules.str()\n                .notEmpty({ errorMessage: \"Product title is required\" })\n                .must(function (t) { return t.length < 1024; }, { errorMessage: \"Product title too long\" }),\n            scrapingUrls: pojo_fluent_validator_1.rules.hash(pojo_fluent_validator_1.rules.str().must(function (url) { return !url || (url.indexOf(\"http://\") === 0 || url.indexOf(\"https://\") === 0); }, { errorMessage: \"URL must starts from http:// or https:// \" }))\n                .filter(function (k, v) { return v && v.trim().length > 0; })\n                .before(function (urls) { return Object.keys(urls)\n                .map(function (shopId) { return urls[shopId]; })\n                .filter(function (url) { return url && url.trim().length > 0; })\n                .length > 0; }, { errorMessage: \"At least one scraping URL must be specified.\" })\n        });\n    }\n    ProductValidator.prototype.validate = function (product) {\n        if (!product)\n            throw new Error(\"product is undefined\");\n        return utils_1.validate(product, this.validator);\n    };\n    return ProductValidator;\n}());\nexports.ProductValidator = ProductValidator;\nvar PriceValidator = (function () {\n    function PriceValidator() {\n        this.validator = pojo_fluent_validator_1.rules\n            .num(true, { stopOnFailure: true, errorMessage: \"Manual price is not recognized as number\" })\n            .must(function (price) { return !price || price > 0; }, { stopOnFailure: true, errorMessage: \"Manual price must be greater than zero\" });\n    }\n    PriceValidator.prototype.validate = function (price) {\n        if (!price)\n            throw new Error(\"Price is undefined\");\n        return utils_1.validate(price, this.validator);\n    };\n    return PriceValidator;\n}());\nexports.PriceValidator = PriceValidator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/products/product-validator.ts\n// module id = 17\n// module chunks = 0 1","/// <reference path=\"../../server/typings/index.d.ts\" />\n\"use strict\";\nvar db_1 = require(\"../../server/data-access/db\");\nvar mongo_product_storage_1 = require(\"../../server/services/products/mongo-product-storage\");\nvar product_service_1 = require(\"../../server/services/products/product-service\");\nvar mongo_web_shop_storage_1 = require(\"../../server/services/web-shop/mongo-web-shop-storage\");\nvar web_shop_service_1 = require(\"../../server/services/web-shop/web-shop-service\");\nvar scrape_service_1 = require(\"../../server/services/scraping/scrape-service\");\nvar db = new db_1.default();\nvar webShopService = new web_shop_service_1.default(new mongo_web_shop_storage_1.default(db));\nvar productService = new product_service_1.default(new mongo_product_storage_1.default(db));\nvar scrapeService = new scrape_service_1.default(productService, webShopService);\nfunction outputProductScrapeResult(scrapeResult, product, shops) {\n    console.dir(scrapeResult);\n}\nwebShopService.all()\n    .then(function (shops) {\n    return productService.all()\n        .then(function (products) {\n        var productScrapePromises = products.map(function (product) {\n            return scrapeService.scrapeProductData(product.id)\n                .then(function (productScrapeResultHash) { return outputProductScrapeResult(productScrapeResultHash, product, shops); });\n        });\n        return Promise.all(productScrapePromises);\n    });\n})\n    .then(function () {\n    console.info(\"Scraping completed successfully\");\n    process.exit();\n})\n    .catch(function (err) {\n    console.error(\"Scraping failed\");\n    console.error(err);\n    process.exit();\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server-test/test-parsing/run-page-parsing.ts\n// module id = 20\n// module chunks = 1","\"use strict\";\nvar jsdom_scraper_1 = require(\"../../scrapers/jsdom-scraper\");\nvar event_bus_1 = require(\"../event-bus\");\nvar emptyScrapedValues = {\n    title: null,\n    price: null,\n    image: null\n};\nvar ScrapeService = (function () {\n    function ScrapeService(productService, webShopService) {\n        this.productService = productService;\n        this.webShopService = webShopService;\n        this.scraper = new jsdom_scraper_1.default();\n        if (!productService)\n            throw new Error(\"productService is undefined\");\n        if (!webShopService)\n            throw new Error(\"webShopService is undefined\");\n        this.webShops = this.webShopService\n            .all()\n            .then(function (shops) { return shops.toHash(function (s) { return s.id; }); });\n    }\n    ScrapeService.prototype.scrapeProductData = function (productId) {\n        var _this = this;\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n        return Promise.all([\n            this.webShops,\n            this.productService.one(productId)\n        ])\n            .then(function (_a) {\n            var shops = _a[0], product = _a[1];\n            return Promise.all(_this.scrapeProduct(product, shops));\n        })\n            .then(function (r) { return r.toHash(function (e) { return e.webShopId; }, function (e) { return e.scrapedValues; }); })\n            .then(function (hash) {\n            event_bus_1.eventBus.emit(event_bus_1.EventNames.ProductScraped, productId);\n            return hash;\n        });\n    };\n    ScrapeService.prototype.scrapeProduct = function (product, shops) {\n        var _this = this;\n        return Object.keys(product.scrapingUrls)\n            .map(function (webShopId) { return _this.scrapeProductFromShopAndSave(product, webShopId, shops)\n            .then(function (scrapedValues) { return ({ webShopId: webShopId, scrapedValues: scrapedValues }); }); });\n    };\n    ScrapeService.prototype.scrapeProductFromShopAndSave = function (product, webShopId, shops) {\n        var _this = this;\n        return this.scraper\n            .scrape(product.scrapingUrls[webShopId], shops[webShopId].scrapingSettings, webShopId)\n            .then(function (scrapedValues) { return _this.productService\n            .updateScrapedData(product.id, webShopId, scrapedValues)\n            .then(function () { return scrapedValues; }); }, function (err) { return _this.productService\n            .updateScrapedData(product.id, webShopId, emptyScrapedValues)\n            .then(function () { return emptyScrapedValues; }); });\n    };\n    return ScrapeService;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = ScrapeService;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/services/scraping/scrape-service.ts\n// module id = 21\n// module chunks = 1","/// <reference path=\"../typings/index.d.ts\" />\n\"use strict\";\nvar jsdom = require(\"jsdom\");\nvar createDebugger = require(\"debug\");\nvar value_parser_1 = require(\"./value-parser\");\nvar JsdomScraper = (function () {\n    function JsdomScraper() {\n        this.valueParser = new value_parser_1.default();\n    }\n    JsdomScraper.prototype.scrape = function (url, values, webShopId) {\n        var _this = this;\n        if (!url)\n            throw new Error(\"url is undefined\");\n        if (!values)\n            throw new Error(\"values is undefined.\");\n        if (!Object.keys(values).length)\n            throw new Error(\"No values to extract\");\n        webShopId = webShopId || \"unknown-web-shop\";\n        var log = {\n            error: createDebugger(\"gameology:error:jsdom:\" + webShopId),\n            debug: createDebugger(\"gameology:debug:jsdom:\" + webShopId),\n            dump: createDebugger(\"gameology:dump:jsdom:\" + webShopId)\n        };\n        var result = {\n            title: null,\n            price: null,\n            image: null\n        };\n        // \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36\"\n        return new Promise(function (resolve, reject) {\n            jsdom.env({\n                url: url,\n                userAgent: \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36\",\n                features: {\n                    FetchExternalResources: false,\n                    ProcessExternalResources: false\n                },\n                done: function (err, window) {\n                    if (err) {\n                        log.error(\"Error occured on scraping URL \" + url + \".\\r\\n\" + JSON.stringify(err));\n                        reject(err);\n                        return;\n                    }\n                    if (!window || !window.document) {\n                        log.error(\"Error occured on scraping URL \" + url + \". HTML data are not received.\");\n                        reject(new Error(\"HTML is not received.\"));\n                        return;\n                    }\n                    var tags = window.document.getElementsByTagName(\"html\");\n                    if (!tags || !tags.length) {\n                        log.dump(\"HTML element is missing in document.\");\n                    }\n                    else {\n                        log.dump(tags[0].innerHTML);\n                    }\n                    Object.keys(values)\n                        .forEach(function (valueName) {\n                        var settings = values[valueName];\n                        result[valueName] = _this.scrapeValue(window.document, settings, log);\n                    });\n                    log.debug(\"Scraping data from \" + url + \" completed with values \" + JSON.stringify(result));\n                    resolve(result);\n                }\n            });\n        });\n    };\n    JsdomScraper.prototype.scrapeValue = function (document, valueScrapingSettings, log) {\n        if (!document)\n            throw new Error(\"document is undefined\");\n        if (!valueScrapingSettings)\n            throw new Error(\"valueScrapingSettings is undefined\");\n        var parsingContext = {\n            location: document.location\n        };\n        for (var _i = 0, valueScrapingSettings_1 = valueScrapingSettings; _i < valueScrapingSettings_1.length; _i++) {\n            var scrapingSetting = valueScrapingSettings_1[_i];\n            try {\n                var rawValue = this.extractRawValueFromDocument(document, scrapingSetting);\n                var parsedValue = this.valueParser[scrapingSetting.type](rawValue, parsingContext);\n                return parsedValue;\n            }\n            catch (error) {\n                log.error(\"The error occured due parsing value. \" + error);\n                if (scrapingSetting.failOnError)\n                    return null;\n            }\n        }\n        return null;\n    };\n    JsdomScraper.prototype.extractRawValueFromDocument = function (document, valueScrapingSetting) {\n        var extractMethod = valueScrapingSetting.extract || \"queryselector\";\n        switch (extractMethod) {\n            case \"queryselector\":\n                {\n                    var querySelectorSettings = valueScrapingSetting;\n                    if (!querySelectorSettings.elementSelector)\n                        throw new Error(\"elementSelector is missing\");\n                    var elements = document.querySelectorAll(querySelectorSettings.elementSelector);\n                    if (elements.length === 0)\n                        throw new Error(\"Element with selector \" + querySelectorSettings.elementSelector + \" is missing\");\n                    if (elements.length > 1)\n                        throw new Error(\"There are more than one element with selector \" + querySelectorSettings.elementSelector);\n                    if (querySelectorSettings.attribute)\n                        return elements[0].getAttribute(querySelectorSettings.attribute);\n                    else\n                        return elements[0].textContent;\n                }\n                ;\n            case \"regex\":\n                {\n                    var regexSettings = valueScrapingSetting;\n                    if (!regexSettings.regex)\n                        throw new Error(\"regex missing\");\n                    var text = document.querySelector(\"html\").innerHTML;\n                    var regex = new RegExp(regexSettings.regex, \"gmi\");\n                    var matches = regex.exec(text);\n                    if (!matches.length)\n                        throw new Error(\"No value matches\");\n                    return matches[1];\n                }\n                ;\n            default:\n                throw new Error(\"Unknown extract method\");\n        }\n    };\n    return JsdomScraper;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = JsdomScraper;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/scrapers/jsdom-scraper.ts\n// module id = 22\n// module chunks = 1","module.exports = require(\"jsdom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsdom\"\n// module id = 23\n// module chunks = 1","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 24\n// module chunks = 1","\"use strict\";\n/// <reference path=\"../typings/index.d.ts\"/>\nvar path = require(\"path\");\nvar ValueParserHash = (function () {\n    function ValueParserHash() {\n        this.parsers = {};\n        this.parsers[\"string\"] = this.string;\n        this.parsers[\"number\"] = this.number;\n    }\n    ValueParserHash.prototype.string = function (input) {\n        return (input || \"\").trim();\n    };\n    ValueParserHash.prototype.number = function (input) {\n        if (!input)\n            throw new Error(\"Number is missing.\");\n        var src = input.replace(/[^0-9\\.]/g, \"\");\n        var number = parseFloat(src);\n        if (number && !isNaN(number))\n            return number;\n        throw new Error(\"Number format is not valid.\");\n    };\n    ValueParserHash.prototype.relativeUrl = function (input, context) {\n        var baseLocation = input[0] === \"/\" ? context.location.origin : context.location.href;\n        return path.posix.join(baseLocation, input).replace(\":/\", \"://\");\n    };\n    return ValueParserHash;\n}());\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = ValueParserHash;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/scrapers/value-parser.ts\n// module id = 25\n// module chunks = 1","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 26\n// module chunks = 1"],"sourceRoot":""}