{"version":3,"sources":["webpack:///webpack/bootstrap b86d78e66abc8d850f72?31dd","webpack:///./server/extensions.ts?6836","webpack:///./server/data-access/db.ts?fc04","webpack:///external \"mongodb\"?b417","webpack:///./server/config.ts?d70e","webpack:///external \"fs\"?2e09","webpack:///./server/services/web-shop/mongo-web-shop-storage.ts?d4d9","webpack:///./server/services/web-shop/web-shop-service.ts?8393","webpack:///./server/services/web-shop/web-shop-validator.ts?4110","webpack:///external \"pojo-fluent-validator\"?abc9","webpack:///./server/services/utils.ts?fa0a","webpack:///./server/services/products/mongo-product-storage.ts?2fde","webpack:///./server/services/products/product-service.ts?576f","webpack:///external \"node-uuid\"?fdd4","webpack:///./server/services/event-bus.ts?93ac","webpack:///external \"events\"?c68f","webpack:///./server/services/products/product-validator.ts?6887","webpack:///./server-test/test-parsing/run-page-parsing.ts","webpack:///./server/services/scraping/scrape-service.ts","webpack:///./server/scrapers/jsdom-scraper.ts","webpack:///external \"jsdom\"","webpack:///external \"debug\"","webpack:///./server/scrapers/value-parser.ts","webpack:///external \"path\""],"names":[],"mappings":"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","file":"run-page-parsing.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b86d78e66abc8d850f72","/// <reference path=\"typings/index.d.ts\" />\n\nif (!Array.prototype.toHash) {\n    Array.prototype.toHash = function toHash<T, K>(keySelector: (elem: T) => string, valueSelector?: (elem: T) => K): { [key: string]: K; } {\n        valueSelector = valueSelector || ((e: T) => ((e as any) as K));\n\n        return this.reduce((hash, elem) => {\n            const key = keySelector(elem);\n            const value = valueSelector(elem);\n\n            hash[key] = value;\n\n            return hash;\n        },\n            {}) as { [key: string]: K; };\n    };\n}\n\n\nif (!Array.prototype.min) {\n    Array.prototype.min = function min<T, K>(selector: (elem: T) => K): T {\n        const self: T[] = this;\n        if (!self.length) {\n            return null;\n        }\n\n        let minElement = self[0];\n        let minValue = selector(minElement);\n\n        for (let i = 1; i < self.length; i++) {\n            let element = self[i];\n            let value = selector(element);\n\n            if (value < minValue) {\n                minValue = value;\n                minElement = element;\n            }\n        }\n\n        return minElement;\n    }\n}\n\nif (!Array.prototype.max) {\n    Array.prototype.max = function min<T, K>(selector: (elem: T) => K): T {\n        const self: T[] = this;\n        if (!self.length) {\n            return null;\n        }\n\n        let maxElement = self[0];\n        let maxValue = selector(maxElement);\n\n        for (let i = 1; i < self.length; i++) {\n            let element = self[i];\n            let value = selector(element);\n\n            if (value > maxValue) {\n                maxValue = value;\n                maxElement = element;\n            }\n        }\n\n        return maxElement;\n    }\n}\n\n\nif (!Object.entries) {\n    Object.entries = (obj: any) => Object.keys(obj)\n        .map(key => ([key, obj[key]]));\n}\n\n\n// WEBPACK FOOTER //\n// ./server/extensions.ts","/// <reference path=\"../typings/index.d.ts\" />\nimport * as mongo from \"mongodb\";\nimport config from \"../config\";\n\nlet connectionString = config.mongoUrl;\n\nlet db: Promise<mongo.Db> = new Promise((resolve, reject) => {\n    if (process.env.OPENSHIFT_MONGODB_DB_PASSWORD) {\n        connectionString = process.env.OPENSHIFT_MONGODB_DB_USERNAME + \":\" +\n            process.env.OPENSHIFT_MONGODB_DB_PASSWORD + \"@\" +\n            process.env.OPENSHIFT_MONGODB_DB_HOST + ':' +\n            process.env.OPENSHIFT_MONGODB_DB_PORT + '/' +\n            process.env.OPENSHIFT_APP_NAME;\n    }\n    mongo.MongoClient.connect('mongodb://' + connectionString,\n        (err, db) => {\n            if (err) {\n                reject(err);\n            } else {\n                console.info(`Connected to Mongo server at ${connectionString}`);\n                resolve(db);\n            }\n        });\n});\n\nexport default class Database {\n    static Collections = {\n        sessions: \"sessions\",\n        webshops: \"webshops\",\n        products: \"products\",\n        users: \"users\"\n    };\n\n    collection(collection: string): Promise<mongo.Collection> {\n        if (!collection)\n            throw new Error(\"collection is undefined\");\n        if (!Database.Collections[collection])\n            throw new Error(`Collection ${collection} is unknown`);\n\n        return this.connect()\n            .then(db => db.collection(collection));\n    }\n\n    private connect(): Promise<mongo.Db> {\n        return db;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/data-access/db.ts","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 4\n// module chunks = 0 1","/// <reference path=\"typings/index.d.ts\"/>\nimport * as fs from \"fs\";\n\n\nlet configContent = fs.readFileSync(\"./config.json\", \"utf8\");\nlet configuration = <Configuration>JSON.parse(configContent);\n\nexport default configuration;\n\n\n// WEBPACK FOOTER //\n// ./server/config.ts","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 6\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\nimport Database from \"../../data-access/db\";\n\nexport default class MongoWebShopStorage implements WebShops.IWebShopStorage {\n    constructor(private db: Database) {\n        if (!db)\n            throw new Error(\"db is undefined\");\n    }\n\n    all(): Promise<Api.WebShop[]> {\n        return this.db\n            .collection(Database.Collections.webshops)\n            .then(c => c.find({}, { _id: 0 }))\n            .then(c => c.toArray());\n    }\n\n    one(id: string): Promise<Api.WebShop> {\n        if (!id)\n            throw new Error(\"id is undefined\");\n\n        return this.db\n            .collection(Database.Collections.webshops)\n            .then(c => c.find({ id: id }, { _id: 0 }))\n            .then(c => c.limit(1).next());\n    }\n\n    save(webShop: Api.WebShop): Promise<Api.WebShop> {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n\n        return this.db\n            .collection(Database.Collections.webshops)\n            .then(c => c.updateOne(\n                {\n                    id: webShop.id\n                },\n                {\n                    $set: {\n                        deliveryPrice: webShop.deliveryPrice\n                    }\n                }\n            ))\n            .then(() => webShop);\n    }\n\n    put(webShop: Api.WebShop): Promise<Api.WebShop> {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n\n        return this.db\n            .collection(Database.Collections.webshops)\n            .then(c => c.updateOne(\n                {\n                    id: webShop.id\n                },\n                webShop,\n                {\n                    upsert: true\n                }\n            ))\n            .then(() => webShop);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/web-shop/mongo-web-shop-storage.ts","/// <reference path=\"../../typings/index.d.ts\" />\n\nimport WebShopValidator from \"./web-shop-validator\";\n\nexport default class WebShopService {\n\n    private validator = new WebShopValidator();\n\n    constructor(private storage: WebShops.IWebShopStorage) {\n        if (!storage)\n            throw new Error(\"storage is undefined\");\n    }\n\n    all(): Promise<Api.WebShop[]> {\n        return this.storage.all();\n    }\n\n    one(webShopId: string): Promise<Api.WebShop> {\n        if (!webShopId)\n            throw new Error(\"webShopId is undefined\");\n        return this.storage.one(webShopId);\n    }\n\n    save(webShop: Api.WebShop): Promise<Api.WebShop> {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n\n        return this.validator\n            .validate(webShop)\n            .then(webShop => this.storage\n                .save(webShop)\n                .then(() => this.one(webShop.id)));\n    }\n\n    put(webShop: Api.WebShop): Promise<Api.WebShop> {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n\n        return <Promise<Api.WebShop>><any>this.storage\n            .put(webShop)\n            .then(() => this.one(webShop.id))\n            .catch(err => {\n                throw {\n                    \"\": `${err}`\n                };\n            });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/web-shop/web-shop-service.ts","/// <reference path=\"../../typings/index.d.ts\" />\n\nimport { ValidationRule, rules } from \"pojo-fluent-validator\";\nimport { validate } from \"../utils\";\n\nexport default class WebShopValidator {\n    /** Only updateable fields is validated */\n    public validator: ValidationRule<Api.WebShop> = rules.obj<Api.WebShop>({\n        deliveryPrice: rules.num(false, { errorMessage: \"Invalid price\" })\n            .parseNumber({ errorMessage: \"Price is not recognized as number\" })\n            .must(price => !price || price > 0, { errorMessage: \"Delivery price must be greater than zero\" })\n    }).expandable();\n\n    validate(webShop: Api.WebShop): Promise<Api.WebShop> {\n        if (!webShop)\n            throw new Error(\"webShop is undefined\");\n\n        return validate(webShop, this.validator);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/web-shop/web-shop-validator.ts","module.exports = require(\"pojo-fluent-validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pojo-fluent-validator\"\n// module id = 10\n// module chunks = 0 1","/// <reference path=\"../typings/index.d.ts\" />\n\nimport { validate as validateWithCallback, ValidationRule } from \"pojo-fluent-validator\";\n\nexport function validate<T>(value: any, ...validators: ValidationRule<T>[]): Promise<T> {\n    if (!validators || !validators.length) {\n        throw new Error(\"At least one validator is required\");\n    }\n\n    return new Promise((resolve, reject) => {\n        validateWithCallback(\n            value,\n            (errors, result) => {\n                if (errors) {\n                    reject(errors);\n                }\n                else {\n                    resolve(result);\n                };\n            },\n            ...validators);\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/utils.ts","/// <reference path=\"../../typings/index.d.ts\" />\nimport { Cursor } from \"mongodb\";\n\nimport Database from \"../../data-access/db\";\n\nexport default class MongoProductStorage implements Products.IProductStorage {\n    constructor(private db: Database) {\n        if (!db)\n            throw new Error(\"db is missing\");\n    }\n\n    all(): Promise<Api.Product[]> {\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.find({}, { _id: 0 }))\n            .then(c => c.toArray());\n    }\n\n    search(search?: string): Promise<Cursor> {\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.find({ title: { $regex: search, $options: \"i\" } }, { _id: 0 }));\n    }\n\n    paginate(search?: string, page?: number, perPage?: number): Promise<Api.Product[]> {\n        return this.search(search).then(c => c.skip(page > 1 ? (page - 1) * perPage : 0).limit(perPage))\n            .then(c => c.toArray())\n    }\n\n    count(search?: string): Promise<number> {\n        return this.search(search).then(c => c.count(false));\n    }\n\n    one(id: string): Promise<Api.Product> {\n        if (!id)\n            throw new Error(\"id is undefined\");\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.find({ id: id }, { _id: 0 }))\n            .then(c => c.limit(1))\n            .then(c => c.next());\n    }\n\n    findByTitle(title: string): Promise<Api.Product> {\n        if (!title)\n            return Promise.reject(\"Title is empty\");\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.find({ title }, { _id: 0 }))\n            .then(c => c.limit(1))\n            .then(c => c.next());\n    }\n\n    save(product: Api.Product): Promise<Api.Product> {\n        if (!product)\n            throw new Error(\"product is undefined\");\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.updateOne({\n                id: product.id\n            },\n                {\n                    $set: {\n                        id: product.id,\n                        title: product.title,\n                        scrapingUrls: product.scrapingUrls\n                    }\n                },\n                {\n                    upsert: true\n                }))\n            .then(() => product);\n    }\n\n    savePrice(productId: string, shopId: string, price: number): Promise<Api.IResponse> {\n        if (!productId)\n            throw new Error(\"product id is undefined\");\n\n        if (!productId)\n            throw new Error(\"product id is undefined\");\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => {\n                c.update({\n                    id: productId\n                },\n                    {\n                        $set: {\n                            [`values.${shopId}.manualPrice`]: price\n                        }\n                    },\n                    {\n                        upsert: true\n                    });\n            })\n            .then(() => ({ ok: true }));\n    }\n\n    delete(productId: string): Promise<any> {\n        if (!productId)\n            throw new Error(\"Product ID is not defined.\");\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.deleteOne({ id: productId }))\n            .then(c => true);\n    }\n\n    setScrapingData(productId: string, webShopId: string, values: Api.ScrapedValues): Promise<Api.Product> {\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n        if (!webShopId)\n            throw new Error(\"webShopId is undefined\");\n        if (!values)\n            throw new Error(\"values is undefined\");\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.updateOne(\n                {\n                    id: productId\n                },\n                {\n                    $set: {\n                        [`values.${webShopId}`]: values\n                    }\n                },\n                {\n                    upsert: true\n                }))\n            .then(r => this.one(productId));\n    }\n\n    discardScrapingData(productId: string, shops: string[]): Promise<any> {\n        if (!shops || !shops.length) {\n            return;\n        }\n\n        const unset = shops.reduce((val, shopId) => {\n            val[`log.${shopId}`] = \"\";\n            val[`values.${shopId}`] = \"\";\n\n            return val;\n        }, {});\n\n\n        return this.db\n            .collection(Database.Collections.products)\n            .then(c => c.updateOne(\n                { id: productId },\n                { $unset: unset }\n            ));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/products/mongo-product-storage.ts","/// <reference path=\"../../typings/index.d.ts\" />\n\nimport * as moment from \"moment\";\nimport * as uuid from \"node-uuid\";\n\nimport { eventBus, EventNames } from \"../event-bus\";\n\nimport { ProductValidator, PriceValidator } from \"./product-validator\";\n\nexport default class ProductService {\n    private validator = new ProductValidator();\n\n    constructor(private storage: Products.IProductStorage) {\n        if (!storage)\n            throw new Error(\"storage is undefined\");\n    }\n\n    all(): Promise<Api.Product[]> {\n        return this.storage.all();\n    }\n\n    paginate(search: string = \"\", page: number = 1, perPage: number = 20): Promise<Api.ProductPage> {\n        return this.storage.count(search).then(count => {\n            const realPage = page >= 1 ? page : 1;\n            const totalPages = count % perPage ? Math.floor(count / perPage) + 1 : count / perPage;\n            const currentPage = realPage > totalPages ? totalPages : realPage;\n            return this.storage.paginate(search, currentPage, perPage).then(items => ({ items, totalPages, currentPage }));\n        })\n    }\n\n    save(product: Api.Product): Promise<Api.Product> {\n        if (!product)\n            throw new Error(\"product is undefined\");\n\n        if (!product.id)\n            product.id = uuid.v1();\n\n        return this.validator\n            .validate(product)\n            .then(product => {\n                return this.storage\n                    .findByTitle(product.title)\n                    .then(found => {\n                        if (found && found.id !== product.id) {\n                            throw {\n                                \"title\": [\"Product with such title already exists\"]\n                            };\n                        }\n                    })\n                    .then(() => this.writeProductAndDiscardScrapeData(product))\n                    .then(product => {\n                        eventBus.emit(EventNames.ProductUpdated, product.id);\n                        return product;\n                    });\n            });\n    }\n\n    savePrice(productId: string, shopId: string, price: string): Promise<Api.IResponse> {\n        if (!productId)\n            throw new Error(\"product id is undefined\");\n\n        if (!shopId)\n            throw new Error(\"shop id is undefined\");\n\n        let priceValidator = new PriceValidator();\n\n        return priceValidator\n            .validate(price)\n            .then(r => {\n                return this.storage.savePrice(productId, shopId, r);\n            });\n    }\n\n    one(productId: string): Promise<Api.Product> {\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n\n        return this.storage.one(productId);\n    }\n\n    findByTitle(title: string): Promise<Api.Product> {\n        return this.storage.findByTitle(title);\n    }\n\n    updateScrapedData(productId: string, webshopId: string, data: Api.ScrapedValues): Promise<Api.Product> {\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n        if (!webshopId)\n            throw new Error(\"webShopId is undefined\");\n        if (!data)\n            throw new Error(\"data is undefined\");\n\n        return this.one(productId)\n            .then(product => {\n                return this.storage.setScrapingData(product.id, webshopId, data);\n            });\n    }\n\n    delete(productId: string): Promise<any> {\n        if (!productId)\n            throw new Error(\"Product ID is not defined.\");\n        return this.storage.delete(productId);\n    }\n\n    /**\n     * Writes validated product to storage and removes values and logs for changed URL.\n     */\n    writeProductAndDiscardScrapeData(product: Api.Product): Promise<Api.Product> {\n        return this.one(product.id)\n            .then(origin => {\n\n                return this.storage\n                    .save(product)\n                    .then(() => {\n                        if (origin) {\n                            const shops = Object.entries(product.scrapingUrls)\n                                .filter(([shop, url]) => {\n                                    const originUrl = origin.scrapingUrls[shop];\n\n                                    return url !== originUrl;\n                                })\n                                .map(([shop, url]) => shop);\n\n                            const removedShops = Object.keys(origin.scrapingUrls)\n                                .filter(shopId => !product.scrapingUrls[shopId]);\n\n                            shops.push(...removedShops);\n\n                            return this.storage.discardScrapingData(product.id, shops);\n                        }\n                        else {\n                            return Promise.resolve();\n                        }\n                    })\n                    .then(() => this.storage.one(product.id))\n            });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/products/product-service.ts","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 14\n// module chunks = 0 1","/// <reference path=\"../typings/index.d.ts\"/>\n\nimport { EventEmitter } from \"events\";\n\nclass EventNames {\n    /**\n     * Published when product inserted or updated.\n     * Params is product id: string.\n     */\n    static ProductUpdated = \"product-updated\";\n    /**\n     * Published when product data is scraped.\n     * Param is product id: string.\n     */\n    static ProductScraped = \"product-scraped\";\n}\n\nconst eventBus = new EventEmitter();\n\nexport { eventBus, EventNames };\n\n\n// WEBPACK FOOTER //\n// ./server/services/event-bus.ts","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 16\n// module chunks = 0 1","/// <reference path=\"../../typings/index.d.ts\" />\n\nimport { ValidationRule, rules } from \"pojo-fluent-validator\";\nimport { validate } from \"../utils\";\n\nexport class ProductValidator {\n    public validator = rules.obj<Api.Product>({\n        id: rules.str().notEmpty({ errorMessage: \"Product ID is required\" }),\n        title: rules.str()\n            .notEmpty({ errorMessage: \"Product title is required\" })\n            .must(t => t.length < 1024, { errorMessage: \"Product title too long\" }),         \n        scrapingUrls: rules.hash(\n                rules.str().must(url => !url || (url.indexOf(\"http://\") === 0 || url.indexOf(\"https://\") === 0), { errorMessage: \"URL must starts from http:// or https:// \" }))\n            .filter((k, v) => v && v.trim().length > 0)\n            .before(urls => Object.keys(urls)\n                .map(shopId => urls[shopId])\n                .filter((url: string) => url && url.trim().length > 0)\n                .length > 0,\n            { errorMessage: \"At least one scraping URL must be specified.\" })\n    });\n\n    validate(product: Api.Product): Promise<Api.Product> {\n        if (!product)\n            throw new Error(\"product is undefined\");\n\n        return validate(product, this.validator);\n    }\n}\n\nexport class PriceValidator {\n    public validator = rules\n                .num(true, { stopOnFailure: true, errorMessage: \"Manual price is not recognized as number\" })\n                .must(price => !price || price > 0, { stopOnFailure: true, errorMessage: \"Manual price must be greater than zero\" });\n\n    validate(price: string): Promise<number> {\n        if (!price)\n            throw new Error(\"Price is undefined\");\n\n        return validate(price, this.validator);\n    }    \n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/products/product-validator.ts","/// <reference path=\"../../server/typings/index.d.ts\" />\n\nimport Database from \"../../server/data-access/db\";\n\nimport MongoProductStorage from \"../../server/services/products/mongo-product-storage\";\nimport ProductService from \"../../server/services/products/product-service\";\n\nimport MongoWebShopStorage from \"../../server/services/web-shop/mongo-web-shop-storage\";\nimport WebShopService from \"../../server/services/web-shop/web-shop-service\";\n\nimport JsdomScraper from \"../../server/scrapers/jsdom-scraper\";\n\nimport ScrapeService from \"../../server/services/scraping/scrape-service\";\n\nconst db = new Database();\n\nconst webShopService = new WebShopService(new MongoWebShopStorage(db));\nconst productService = new ProductService(new MongoProductStorage(db));\n\nconst scrapeService = new ScrapeService(productService, webShopService);\n\nfunction outputProductScrapeResult(scrapeResult: Scraping.ProductScrapeResult, product: Api.Product, shops: Api.WebShop[]) {\n    console.dir(scrapeResult);\n}\n\nwebShopService.all()\n    .then(shops => {\n        return productService.all()\n            .then(products => {\n                const productScrapePromises = products.map(product => {\n                    return scrapeService.scrapeProductData(product.id)\n                        .then(productScrapeResultHash => outputProductScrapeResult(productScrapeResultHash, product, shops));\n                });\n\n                return Promise.all(productScrapePromises);\n            });\n    })\n    .then(() => {\n        console.info(\"Scraping completed successfully\");\n        process.exit();\n    })\n    .catch(err => {\n        console.error(\"Scraping failed\");\n        console.error(err);\n        process.exit();\n    });\n\n\n// WEBPACK FOOTER //\n// ./server-test/test-parsing/run-page-parsing.ts","/// <reference path=\"../../typings/index.d.ts\" />\nimport ProductService from \"../products/product-service\";\nimport WebShopService from \"../web-shop/web-shop-service\";\n\nimport JsdomScraper from \"../../scrapers/jsdom-scraper\";\n\nimport { eventBus, EventNames } from \"../event-bus\";\n\ninterface WebShopHash {\n    [webShopId: string]: Api.WebShop;\n}\n\nconst emptyScrapedValues: Api.ScrapedValues = {\n    title: null,\n    price: null,\n    image: null\n};\n\nexport default class ScrapeService implements Scraping.IScrapeService {\n    private scraper = new JsdomScraper();\n    private webShops: Promise<WebShopHash>;\n\n    constructor(private productService: ProductService,\n        private webShopService: WebShopService) {\n        if (!productService)\n            throw new Error(\"productService is undefined\");\n        if (!webShopService)\n            throw new Error(\"webShopService is undefined\");\n\n        this.webShops = this.webShopService\n            .all()\n            .then(shops => shops.toHash(s => s.id));\n    }\n\n    scrapeProductData(productId: string): Promise<Scraping.ProductScrapeResult> {\n        if (!productId)\n            throw new Error(\"productId is undefined\");\n\n        return Promise.all([\n            this.webShops,\n            this.productService.one(productId)\n        ])\n        .then(([shops, product]) => Promise.all(this.scrapeProduct(product, shops)))\n        .then(r => r.toHash(e => e.webShopId, e => e.scrapedValues))\n        .then(hash => {\n            eventBus.emit(EventNames.ProductScraped, productId);\n            return hash;\n        });\n    }\n\n    private scrapeProduct(product: Api.Product, shops: WebShopHash): Promise<{ webShopId: string; scrapedValues: Api.ScrapedValues; }>[] {\n\n        return Object.keys(product.scrapingUrls)\n                     .map(webShopId => this.scrapeProductFromShopAndSave(product, webShopId, shops)\n                                           .then(scrapedValues => ({ webShopId, scrapedValues })));\n    }\n\n    private scrapeProductFromShopAndSave(product: Api.Product, webShopId: string, shops: WebShopHash): Promise<Api.ScrapedValues> {\n        return this.scraper\n            .scrape(product.scrapingUrls[webShopId], shops[webShopId].scrapingSettings, webShopId)\n            .then(scrapedValues => this.productService\n                                        .updateScrapedData(product.id, webShopId, scrapedValues)\n                                        .then(() => scrapedValues),\n                  err => this.productService\n                             .updateScrapedData(product.id, webShopId, emptyScrapedValues)\n                             .then(() => emptyScrapedValues));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/services/scraping/scrape-service.ts","/// <reference path=\"../typings/index.d.ts\" />\n\nimport * as jsdom from \"jsdom\";\nimport * as createDebugger from \"debug\";\n\nimport ValueParserHash from \"./value-parser\";\n\ninterface Logger {\n    error: debug.IDebugger;\n    debug: debug.IDebugger;\n    dump: debug.IDebugger;\n}\n\n\nexport default class JsdomScraper implements Scraping.IScraper {\n    private valueParser = new ValueParserHash();\n\n    scrape(url: string, values: Api.ScrapingSettings, webShopId?: string): Promise<Api.ScrapedValues> {\n        if (!url)\n            throw new Error(\"url is undefined\");\n        if (!values)\n            throw new Error(\"values is undefined.\");\n        if (!Object.keys(values).length)\n            throw new Error(\"No values to extract\");\n\n        webShopId = webShopId || \"unknown-web-shop\";\n\n        const log = {\n            error: createDebugger(`gameology:error:jsdom:${webShopId}`),\n            debug: createDebugger(`gameology:debug:jsdom:${webShopId}`),\n            dump: createDebugger(`gameology:dump:jsdom:${webShopId}`)\n        };\n\n\n        const result: Api.ScrapedValues = {\n            title: null,\n            price: null,\n            image: null\n        };\n\n        // \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36\"\n        return new Promise((resolve, reject) => {\n            jsdom.env({\n                url: url,\n                userAgent: \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36\",\n                features: {\n                    FetchExternalResources: false,\n                    ProcessExternalResources: false\n                },\n                done: (err, window) => {\n                    if (err) {\n                        log.error(`Error occured on scraping URL ${url}.\\r\\n${JSON.stringify(err)}`);\n                        reject(err);\n                        return;\n                    }\n\n                    if (!window || !window.document) {\n                        log.error(`Error occured on scraping URL ${url}. HTML data are not received.`);\n                        reject(new Error(\"HTML is not received.\"));\n                        return;\n                    }\n\n\n                    const tags = window.document.getElementsByTagName(\"html\");\n\n                    if (!tags || !tags.length) {\n                        log.dump(\"HTML element is missing in document.\");\n                    } else {\n                        log.dump(tags[0].innerHTML);\n                    }\n\n\n                    Object.keys(values)\n                        .forEach(valueName => {\n                            const settings = values[valueName];\n                            result[valueName] = this.scrapeValue(window.document, settings, log);\n                        });\n\n                    log.debug(`Scraping data from ${url} completed with values ${JSON.stringify(result)}`);\n\n                    resolve(result);\n                }\n            });\n        });\n    }\n\n    private scrapeValue(document: Document, valueScrapingSettings: Api.ValueScrapingSettings[], log: Logger): string | number {\n        if (!document)\n            throw new Error(\"document is undefined\");\n        if (!valueScrapingSettings)\n            throw new Error(\"valueScrapingSettings is undefined\");\n\n        const parsingContext: Scraping.ParserContext = {\n            location: document.location\n        };\n\n        for (let scrapingSetting of valueScrapingSettings) {\n            try {\n                const rawValue = this.extractRawValueFromDocument(document, scrapingSetting);\n                const parsedValue = this.valueParser[scrapingSetting.type](rawValue, parsingContext);\n\n                return parsedValue;\n            } catch (error) {\n\n                log.error(`The error occured due parsing value. ${error}`);\n\n                if (scrapingSetting.failOnError)\n                    return null;\n            }\n        }\n\n        return null;\n    }\n\n    private extractRawValueFromDocument(document: Document, valueScrapingSetting: Api.ValueScrapingSettings): string {\n        const extractMethod = valueScrapingSetting.extract || \"queryselector\";\n\n        switch (extractMethod) {\n            case \"queryselector\":\n                {\n                    const querySelectorSettings = valueScrapingSetting as Api.QuerySelectorExtractSettings;\n\n                    if (!querySelectorSettings.elementSelector)\n                        throw new Error(`elementSelector is missing`);\n\n                    const elements = document.querySelectorAll(querySelectorSettings.elementSelector);\n                    if (elements.length === 0)\n                        throw new Error(`Element with selector ${querySelectorSettings.elementSelector} is missing`);\n                    if (elements.length > 1)\n                        throw new Error(`There are more than one element with selector ${querySelectorSettings.elementSelector}`);\n\n                    if (querySelectorSettings.attribute)\n                        return elements[0].getAttribute(querySelectorSettings.attribute);\n                    else\n                        return elements[0].textContent;\n                };\n            case \"regex\":\n                {\n                    const regexSettings = valueScrapingSetting as Api.RegexExtractSettings;\n                    if (!regexSettings.regex)\n                        throw new Error(\"regex missing\");\n\n                    const text = document.querySelector(\"html\").innerHTML;\n\n                    const regex = new RegExp(regexSettings.regex, \"gmi\");\n\n                    const matches = regex.exec(text);\n                    if (!matches.length)\n                        throw new Error(\"No value matches\");\n\n                    return matches[1];\n                };\n            default:\n                throw new Error(\"Unknown extract method\");\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/scrapers/jsdom-scraper.ts","module.exports = require(\"jsdom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsdom\"\n// module id = 23\n// module chunks = 1","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 24\n// module chunks = 1","/// <reference path=\"../typings/index.d.ts\"/>\nimport * as path from \"path\";\n\nexport default class ValueParserHash {\n    parsers = {};\n\n    constructor() {\n        this.parsers[\"string\"] = this.string;\n        this.parsers[\"number\"] = this.number;\n    }\n\n    string(input: string): any {\n        return (input || \"\").trim();\n    }\n\n    number(input: string): any {\n        if (!input)\n            throw new Error(\"Number is missing.\");\n\n        const src = input.replace(/[^0-9\\.]/g, \"\");\n\n        const number = parseFloat(src);\n\n        if (number && !isNaN(number))\n            return number;\n\n        throw new Error(\"Number format is not valid.\");\n    }\n\n    relativeUrl(input: string, context: Scraping.ParserContext) {\n        const baseLocation = input[0] === \"/\" ? context.location.origin : context.location.href;        \n\n        return path.posix.join(baseLocation, input).replace(\":/\", \"://\");\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/scrapers/value-parser.ts","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 26\n// module chunks = 1"],"sourceRoot":""}