{"version":3,"sources":["webpack:///webpack/bootstrap dba81c8ec426cce1fb7f","webpack:///./server-test/test-data/import-test-data.ts","webpack:///./server/data-access/db.ts","webpack:///external \"mongodb\"","webpack:///./server/config.ts","webpack:///external \"fs\"","webpack:///./server/services/web-shop/mongo-web-shop-storage.ts","webpack:///./server/services/web-shop/web-shop-service.ts","webpack:///./server/services/web-shop/web-shop-validator.ts","webpack:///external \"node-validator\"","webpack:///./server/services/products/mongo-product-storage.ts","webpack:///./server/services/products/product-service.ts","webpack:///./server/services/products/product-validator.ts","webpack:///./server-test/test-data/web-shops.ts","webpack:///./server-test/test-data/products.ts"],"names":[],"mappings":"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","file":"import-test-data.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap dba81c8ec426cce1fb7f\n **/","/// <reference path=\"../../server/typings/index.d.ts\" />\r\n\r\nimport Database from \"../../server/data-access/db\";\r\n\r\nimport MongoWebShopStorage from \"../../server/services/web-shop/mongo-web-shop-storage\";\r\nimport WebShopService from \"../../server/services/web-shop/web-shop-service\";\r\n\r\nimport MongoProductStorage from \"../../server/services/products/mongo-product-storage\";\r\nimport ProductService from \"../../server/services/products/product-service\";\r\n\r\nimport { webShops } from \"./web-shops\";\r\nimport { products } from \"./products\";\r\n\r\nconst db = new Database();\r\n\r\nconst webShopService = new WebShopService(new MongoWebShopStorage(db));\r\nconst productService = new ProductService(new MongoProductStorage(db));\r\n\r\nfunction addWebShop(webShop: WebShops.WebShop): Promise<any> {\r\n    return webShopService.save(webShop)\r\n        .then(() => {\r\n            console.info(`Web shop ${webShop.title} added.`);\r\n\r\n            const index = webShops.indexOf(webShop);\r\n            if (index !== webShops.length - 1) {\r\n                return addWebShop(webShops[index + 1]);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.error(`Error adding web shop ${webShop.title}`);\r\n            console.error(err);\r\n        });\r\n}\r\n\r\nfunction addProduct(product: Products.Product): Promise<any> {\r\n    return productService.save(product)\r\n        .then(() => {\r\n            console.info(`Product ${product.title} added.`);\r\n\r\n            const index = products.indexOf(product);\r\n            if (index !== products.length - 1) {\r\n                return addProduct(products[index + 1]);\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.error(`Error adding product ${product.title}`);\r\n            console.error(err);\r\n        });\r\n}\r\n\r\naddWebShop(webShops[0])\r\n    .then(() => {\r\n        return addProduct(products[0]);\r\n    });\n\n\n/** WEBPACK FOOTER **\n ** ./server-test/test-data/import-test-data.ts\n **/","/// <reference path=\"../typings/index.d.ts\" />\r\nimport * as mongo from \"mongodb\";\r\nimport config from \"../config\";\r\n\r\nlet db: Promise<mongo.Db> = new Promise((resolve, reject) => {\r\n    mongo.MongoClient.connect(config.mongoUrl,\r\n    (err, db) => {\r\n        if (err) {\r\n            reject(err);\r\n        } else {\r\n            console.log(`Connected to Mongo server at ${config.mongoUrl}`);\r\n            resolve(db);\r\n        }\r\n    });\r\n});\r\n\r\nexport default class Database {\r\n    static Collections = {\r\n        sessions: \"sessions\",\r\n        webshops: \"webshops\",\r\n        products: \"products\"\r\n    };\r\n\r\n    collection(collection: string): Promise<mongo.Collection> {\r\n        if (!collection)\r\n            throw new Error(\"collection is undefined\");\r\n        if (!Database.Collections[collection])\r\n            throw new Error(`Collection ${collection} is unknown`);\r\n\r\n        return this.connect()\r\n            .then(db => db.collection(collection));\r\n    }\r\n\r\n    private connect(): Promise<mongo.Db> {\r\n        return db;\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/data-access/db.ts\n **/","module.exports = require(\"mongodb\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongodb\"\n ** module id = 2\n ** module chunks = 0 1\n **/","/// <reference path=\"typings/index.d.ts\"/>\r\nimport * as fs from \"fs\";\r\n\r\n\r\nlet configContent = fs.readFileSync(\"./config.json\", \"utf8\");\r\nlet configuration = <Configuration>JSON.parse(configContent);\r\n\r\nexport default configuration;\n\n\n/** WEBPACK FOOTER **\n ** ./server/config.ts\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 4\n ** module chunks = 0 1\n **/","/// <reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport Database from \"../../data-access/db\";\r\n\r\nexport default class MongoWebShopStorage implements WebShops.IWebShopStorage {\r\n    constructor(private db: Database) {\r\n        if (!db)\r\n            throw new Error(\"db is undefined\");\r\n    }\r\n\r\n    all(): Promise<WebShops.WebShop[]> {\r\n        return this.db\r\n            .collection(Database.Collections.webshops)\r\n            .then(c => c.find())\r\n            .then(c => c.toArray());\r\n    }\r\n\r\n    one(id: string): Promise<WebShops.WebShop> {\r\n        if (!id)\r\n            throw new Error(\"id is undefined\");\r\n\r\n        return this.db\r\n            .collection(Database.Collections.webshops)\r\n            .then(c => c.find({ id: id }))\r\n            .then(r => r.limit(1))\r\n            .then(c => c.next());\r\n    }\r\n\r\n    save(webShop: WebShops.WebShop): Promise<WebShops.WebShop> {\r\n        if (!webShop)\r\n            throw new Error(\"webShop is undefined\");\r\n\r\n        return this.db\r\n            .collection(Database.Collections.webshops)\r\n            .then(c => c.updateOne({ id: webShop.id }, webShop, { upsert: true }))\r\n            .then(() => webShop);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/services/web-shop/mongo-web-shop-storage.ts\n **/","/// <reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport WebShopValidator from \"./web-shop-validator\";\r\n\r\nexport default class WebShopService {\r\n\r\n    private validator = new WebShopValidator();\r\n\r\n    constructor(private storage: WebShops.IWebShopStorage) {\r\n        if (!storage)\r\n            throw new Error(\"storage is undefined\");\r\n    }\r\n\r\n    all(): Promise<WebShops.WebShop[]> {\r\n        return this.storage.all();\r\n    }\r\n\r\n    save(webShop: WebShops.WebShop): Promise<Validator.ValidationResult> {\r\n        if (!webShop)\r\n            throw new Error(\"webShop is undefined\");\r\n\r\n        return new Promise((resolve, reject) => {\r\n            this.validator\r\n                .validate(webShop)\r\n                .then(validationResult => {\r\n                    if (!validationResult.isValid)\r\n                        reject(validationResult);\r\n                    else\r\n                        this.storage\r\n                            .save(webShop)\r\n                            .then(() => resolve(validationResult));\r\n                });\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/services/web-shop/web-shop-service.ts\n **/","/// <reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport * as validator from \"node-validator\";\r\n\r\nexport default class WebShopValidator {\r\n    private webShopValidator: validator.Validatable;\r\n    private deliveryMethodValidator: validator.Validatable;\r\n\r\n    constructor() {\r\n        this.deliveryMethodValidator = validator.isAnyObject()\r\n            .withRequired(\"deliveryMethod\", validator.isString())\r\n            .withRequired(\"price\", validator.isNumber({ min: 0 }));\r\n\r\n        \r\n        this.webShopValidator = validator.isAnyObject()\r\n            .withRequired(\"title\", validator.isString())\r\n            .withOptional(\"deliveryMethods\", validator.isArray(this.deliveryMethodValidator));\r\n    }\r\n\r\n    validate(webShop: WebShops.WebShop): Promise<Validator.ValidationResult> {\r\n        if (!webShop)\r\n            throw new Error(\"webShop is undefined\");\r\n\r\n        return new Promise(resolve => {\r\n            validator.run(this.webShopValidator,\r\n                webShop,\r\n                (errorCount, errors) => {\r\n                    resolve({\r\n                        isValid: errorCount === 0,\r\n                        errorCount: errorCount,\r\n                        errors: errors\r\n                    });\r\n                });\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/services/web-shop/web-shop-validator.ts\n **/","module.exports = require(\"node-validator\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-validator\"\n ** module id = 8\n ** module chunks = 0 1\n **/","/// <reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport Database from \"../../data-access/db\";\r\n\r\nexport default class MongoProductStorage implements Products.IProductStorage {\r\n    constructor(private db: Database) {\r\n        if (!db)\r\n            throw new Error(\"db is missing\");\r\n    }\r\n\r\n    all(): Promise<Products.Product[]> {\r\n        return this.db\r\n            .collection(Database.Collections.products)\r\n            .then(c => c.find())\r\n            .then(c => c.toArray());\r\n    }\r\n\r\n    one(id: string): Promise<Products.Product> {\r\n        if (!id)\r\n            throw new Error(\"id is undefined\");\r\n\r\n        return this.db\r\n            .collection(Database.Collections.products)\r\n            .then(c => c.find({ id: id }))\r\n            .then(c => c.limit(1))\r\n            .then(c => c.next());\r\n    }\r\n\r\n    save(product: Products.Product): Promise<Products.Product> {\r\n        if (!product)\r\n            throw new Error(\"product is undefined\");\r\n\r\n        return this.db\r\n            .collection(Database.Collections.products)\r\n            .then(c => c.updateOne({ id: product.id }, product, { upsert: true }))\r\n            .then(() => product);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/services/products/mongo-product-storage.ts\n **/","/// <reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport ProductValidator from \"./product-validator\";\r\n\r\nexport default class ProductService {\r\n    private validator = new ProductValidator();\r\n\r\n    constructor(private storage: Products.IProductStorage) {\r\n        if (!storage)\r\n            throw new Error(\"storage is undefined\");\r\n    }\r\n\r\n    all(): Promise<Products.Product[]> {\r\n        return this.storage\r\n            .all();\r\n    }\r\n\r\n    save(product: Products.Product): Promise<Validator.ValidationResult> {\r\n        if (!product)\r\n            throw new Error(\"product is undefined\");\r\n\r\n        return new Promise((resolve, reject) => {\r\n            this.validator\r\n                .validate(product)\r\n                .then(validationResult => {\r\n                    if (!validationResult.isValid)\r\n                        reject(validationResult);\r\n                    else\r\n                    this.storage\r\n                        .save(product)\r\n                        .then(() => resolve(validationResult));\r\n                });\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/services/products/product-service.ts\n **/","/// <reference path=\"../../typings/index.d.ts\" />\r\n\r\nimport * as validator from \"node-validator\";\r\n\r\nexport default class ProductValidator {\r\n    private productValidator: validator.Validatable;\r\n\r\n    constructor() {\r\n        this.productValidator = validator.isAnyObject()\r\n            .withRequired(\"id\", validator.isString())\r\n            .withRequired(\"title\", validator.isString());\r\n\r\n    }\r\n\r\n    validate(product: Products.Product): Promise<Validator.ValidationResult> {\r\n        if (!product)\r\n            throw new Error(\"product is undefined\");\r\n\r\n        return new Promise(resolve => {\r\n            validator.run(this.productValidator,\r\n                product,\r\n                (errorCount, errors) => {\r\n                    resolve({\r\n                        isValid: errorCount === 0,\r\n                        errorCount: errorCount,\r\n                        errors: errors\r\n                    });\r\n                });\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./server/services/products/product-validator.ts\n **/","/// <reference path=\"../../server/typings/index.d.ts\" />\n\nexport const webShops: WebShops.WebShop[] =\n[\n    {\n        id: \"gameology\",\n        isBase: true,\n        title: \"Gameology\",\n        scrapingSettings: {\n            title: [{\n                type: \"string\",\n                elementSelector: \"h1[itemprop='name']\"\n            }],\n            price: [{\n                type: \"number\",\n                elementSelector: \"#ProductPrice\"\n            }],\n            image: [{\n                type: \"string\",\n                elementSelector: \"#ProductPhotoImg\",\n                attribute: \"src\"\n            }]\n        }\n    },\n    {\n        id: \"spieledeluxe\",\n        isBase: false,\n        title: \"Spiele-Deluxe\",\n        scrapingSettings: {\n            title: [{\n                type: \"string\",\n                elementSelector: \"h1[itemprop='name']\"\n            }],\n            price: [{\n                type: \"number\",\n                elementSelector: \"span[itemprop='price']\",\n                attribute: \"content\"\n            }],\n            image: [{\n                type: \"string\",\n                elementSelector: \"img[itemprop='image']\",\n                attribute: \"src\"\n            }]\n        }\n    },\n    {\n        id: \"joedodgy\",\n        isBase: false,\n        title: \"Joe Dodgy\",\n        scrapingSettings: {\n            title: [{\n                type: \"string\",\n                elementSelector: \"meta[itemprop='name']\",\n                attribute: \"content\"\n            }],\n            price: [{\n                type: \"number\",\n                elementSelector: \"#productPrices\"\n            }],\n            image: [{\n                type: \"string\",\n                elementSelector: \"meta[itemprop='image']\",\n                attribute: \"content\"\n            }]\n        }\n    },\n    {\n        id: \"mightyape\",\n        isBase: false,\n        title: \"Mighty Ape\",\n        scrapingSettings: {\n            title: [{\n                type: \"string\",\n                elementSelector: \"#product-main span[itemprop='name']\"\n            }],\n            price: [{\n                type: \"number\",\n                elementSelector: \"#summary meta[itemprop='price']\",\n                attribute: \"content\"\n            }],\n            image: [{\n                type: \"string\",\n                elementSelector: \"#product-main .main-image img\",\n                attribute: \"src\"\n            }]\n        }\n    },\n    {\n        id: \"unhalfbricking\",\n        title: \"Unhalfbricking\",\n        isBase: false,\n        scrapingSettings: {\n            title: [{\n                type: \"string\",\n                extract: \"regex\",\n                regex: \"<font.*?>(.*?)<\\\\/font>\"\n            }],\n            price: [{\n                type: \"number\",\n                extract: \"regex\",\n                regex: \"\\\\(\\\\$([\\\\d\\\\.]*?)\\\\)\"\n            }],\n            image: [{\n                type: \"string\",\n                extract: \"regex\",\n                regex: '<img.*?src=\"(.*?)\".*?\\\\>'\n            }]\n        }\n    }\n];\n\n\n/** WEBPACK FOOTER **\n ** ./server-test/test-data/web-shops.ts\n **/","/// <reference path=\"../../server/typings/index.d.ts\" />\r\n\r\nexport const products: Products.Product[] = [\r\n    {\r\n        id: \"be81468f1c774f4c96e11d3e2c2df67e\",\r\n        title: \"DIXIT\",\r\n        scrapingUrls: {\r\n            \"gameology\": \"http://www.gameology.com.au/products/b157_dixit_b?variant=11511240901\",\r\n            \"spieledeluxe\": \"http://spieledeluxe.com/products/dixit-2014-edition\",\r\n            \"joedodgy\": \"http://www.joedodgy.com.au/index.php?main_page=product_info&cPath=3_373_374&products_id=1038\",\r\n            \"mightyape\": \"https://www.mightyape.com.au/product/Dixit/10339571\",\r\n            \"unhalfbricking\": \"http://www.unhalfbricking.com/display_game.php?gameid=453\"\r\n        }\r\n    },\r\n    {\r\n        id: \"43e5dc04389047c580079af28cd03dc4\",\r\n        title: \"King of Tokyo\",\r\n        scrapingUrls: {\r\n            \"gameology\": \"http://www.gameology.com.au/products/b147_kingtok_b?variant=11511228037\",\r\n            \"spieledeluxe\": \"http://spieledeluxe.com/products/king-of-tokyo\",\r\n            \"joedodgy\": \"http://www.joedodgy.com.au/index.php?main_page=product_info&cPath=3_438_439&products_id=1092\",\r\n            \"mightyape\": \"https://www.mightyape.com.au/product/King-of-New-York/22831407\",\r\n            \"unhalfbricking\": \"http://www.unhalfbricking.com/display_game.php?gameid=747\"\r\n        }\r\n    },\r\n    {\r\n        id: \"893ce29ee2414a8fa9378a633c3909d5\",\r\n        title: \"Talisman\",\r\n        scrapingUrls: {\r\n            \"gameology\": \"http://www.gameology.com.au/products/b175_talisman_b?variant=11511245893\",\r\n            \"spieledeluxe\": \"http://spieledeluxe.com/products/talisman-revised-4th-edition\",\r\n            \"joedodgy\": \"http://www.joedodgy.com.au/index.php?main_page=product_info&cPath=3_28_66&products_id=49\",\r\n            \"mightyape\": \"https://www.mightyape.com.au/product/Talisman-4th-edition/10515428\"\r\n        }\r\n    },\r\n    {\r\n        id: \"0cdd314016294b369c48c10694928a46\",\r\n        title: \"Takenoko\",\r\n        scrapingUrls: {\r\n            \"gameology\": \"http://www.gameology.com.au/products/b174_takenoko_b?variant=11511245125\",\r\n            \"spieledeluxe\": \"http://spieledeluxe.com/products/takenoko-1\",\r\n            \"joedodgy\": \"http://www.joedodgy.com.au/index.php?main_page=product_info&cPath=3_373_376&products_id=1533\",\r\n            \"mightyape\": \"https://www.mightyape.com.au/product/Takenoko/19756515\",\r\n            \"unhalfbricking\": \"http://www.unhalfbricking.com/display_game.php?gameid=662\"\r\n        }\r\n    },\r\n    {\r\n        id: \"b0c45cf6a00e4ec493b2300d12be6a84\",\r\n        title: \"Tokaido\",\r\n        scrapingUrls: {\r\n            \"gameology\": \"http://www.gameology.com.au/products/tokaido?variant=16810693829\",\r\n            \"spieledeluxe\": \"http://spieledeluxe.com/products/tokaido\",\r\n            \"joedodgy\": \"http://www.joedodgy.com.au/index.php?main_page=product_info&cPath=3_276&products_id=1644\",\r\n            \"mightyape\": \"https://www.mightyape.com.au/product/Tokaido/21890321\",\r\n            \"unhalfbricking\": \"http://www.unhalfbricking.com/display_game.php?gameid=997\"\r\n        }\r\n    },\r\n];\n\n\n/** WEBPACK FOOTER **\n ** ./server-test/test-data/products.ts\n **/"],"sourceRoot":""}