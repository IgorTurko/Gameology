/// <reference path="../../typings/index.d.ts" />
"use strict";
var InMemoryAuthenticationTokenStorage = (function () {
    function InMemoryAuthenticationTokenStorage() {
        this.storage = {};
    }
    InMemoryAuthenticationTokenStorage.prototype.find = function (authenticationToken) {
        if (!authenticationToken)
            return Promise.reject("Empty authentication token.");
        var info = this.storage[authenticationToken];
        if (!info)
            return Promise.reject("Token is invalid.");
        return Promise.resolve(info);
    };
    InMemoryAuthenticationTokenStorage.prototype.save = function (authenticationInfo) {
        if (!authenticationInfo)
            throw new Error("authenticationInfo is undefined");
        if (!authenticationInfo.token)
            throw new Error("authenticationInfo.token is undefined");
        this.storage[authenticationInfo.token] = authenticationInfo;
        return Promise.resolve(authenticationInfo);
    };
    InMemoryAuthenticationTokenStorage.prototype.remove = function (authenticationToken) {
        if (authenticationToken)
            delete this.storage[authenticationToken];
        return Promise.resolve(null);
    };
    return InMemoryAuthenticationTokenStorage;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = InMemoryAuthenticationTokenStorage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW4tbWVtb3J5LWF1dGhlbnRpY2F0aW9uLXRva2VuLXN0b3JhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zZXJ2ZXIvc2VydmljZXMvYXV0aGVudGljYXRpb24vaW4tbWVtb3J5LWF1dGhlbnRpY2F0aW9uLXRva2VuLXN0b3JhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUMsaURBQWlEOztBQUVsRDtJQUFBO1FBQ1ksWUFBTyxHQUF5RSxFQUFFLENBQUM7SUErQi9GLENBQUM7SUE3QkcsaURBQUksR0FBSixVQUFLLG1CQUEyQjtRQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFFekQsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRS9DLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ04sTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUUvQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsaURBQUksR0FBSixVQUFLLGtCQUFxRDtRQUN0RCxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDO1lBQ3BCLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztRQUN2RCxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQztZQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7UUFFN0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsR0FBRyxrQkFBa0IsQ0FBQztRQUU1RCxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCxtREFBTSxHQUFOLFVBQU8sbUJBQTJCO1FBQzlCLEVBQUUsQ0FBQyxDQUFDLG1CQUFtQixDQUFDO1lBQ3BCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRTdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFDTCx5Q0FBQztBQUFELENBQUMsQUFoQ0QsSUFnQ0M7QUFoQ0Q7b0RBZ0NDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyLvu78vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9pbmRleC5kLnRzXCIgLz5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5NZW1vcnlBdXRoZW50aWNhdGlvblRva2VuU3RvcmFnZSBpbXBsZW1lbnRzIEF1dGhlbnRpY2F0aW9uLklBdXRoZW50aWNhdGlvblRva2VuU3RvcmFnZSB7XG4gICAgcHJpdmF0ZSBzdG9yYWdlOiB7IFthdXRoZW50aWNhdGlvblRva2VuOiBzdHJpbmddOiBBdXRoZW50aWNhdGlvbi5BdXRoZW50aWNhdGlvbkluZm8gfSA9IHt9O1xuXG4gICAgZmluZChhdXRoZW50aWNhdGlvblRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uLkF1dGhlbnRpY2F0aW9uSW5mbz4ge1xuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uVG9rZW4pXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJFbXB0eSBhdXRoZW50aWNhdGlvbiB0b2tlbi5cIik7XG5cbiAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuc3RvcmFnZVthdXRoZW50aWNhdGlvblRva2VuXTtcblxuICAgICAgICBpZiAoIWluZm8pXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJUb2tlbiBpcyBpbnZhbGlkLlwiKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGluZm8pO1xuICAgIH1cblxuICAgIHNhdmUoYXV0aGVudGljYXRpb25JbmZvOiBBdXRoZW50aWNhdGlvbi5BdXRoZW50aWNhdGlvbkluZm8pOiBQcm9taXNlPEF1dGhlbnRpY2F0aW9uLkF1dGhlbnRpY2F0aW9uSW5mbz4ge1xuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uSW5mbylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImF1dGhlbnRpY2F0aW9uSW5mbyBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgIGlmICghYXV0aGVudGljYXRpb25JbmZvLnRva2VuKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXV0aGVudGljYXRpb25JbmZvLnRva2VuIGlzIHVuZGVmaW5lZFwiKTtcblxuICAgICAgICB0aGlzLnN0b3JhZ2VbYXV0aGVudGljYXRpb25JbmZvLnRva2VuXSA9IGF1dGhlbnRpY2F0aW9uSW5mbztcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGF1dGhlbnRpY2F0aW9uSW5mbyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlKGF1dGhlbnRpY2F0aW9uVG9rZW46IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGlmIChhdXRoZW50aWNhdGlvblRva2VuKVxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3RvcmFnZVthdXRoZW50aWNhdGlvblRva2VuXTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbn0iXX0=