/// <reference path="../../typings/index.d.ts" />
"use strict";
var InMemoryAuthenticationTokenStorage = (function () {
    function InMemoryAuthenticationTokenStorage() {
        this.storage = {};
    }
    InMemoryAuthenticationTokenStorage.prototype.find = function (authenticationToken) {
        if (!authenticationToken)
            return Promise.reject("Empty authentication token.");
        var info = this.storage[authenticationToken];
        if (!info)
            return Promise.reject("Token is invalid.");
        return Promise.resolve(info);
    };
    InMemoryAuthenticationTokenStorage.prototype.save = function (authenticationInfo) {
        if (!authenticationInfo)
            throw new Error("authenticationInfo is undefined");
        if (!authenticationInfo.token)
            throw new Error("authenticationInfo.token is undefined");
        this.storage[authenticationInfo.token] = authenticationInfo;
        return Promise.resolve(authenticationInfo);
    };
    InMemoryAuthenticationTokenStorage.prototype.remove = function (authenticationToken) {
        if (authenticationToken)
            delete this.storage[authenticationToken];
        return Promise.resolve(null);
    };
    return InMemoryAuthenticationTokenStorage;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = InMemoryAuthenticationTokenStorage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW4tbWVtb3J5LWF1dGhlbnRpY2F0aW9uLXRva2VuLXN0b3JhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zZXJ2ZXIvc2VydmljZXMvYXV0aGVudGljYXRpb24vaW4tbWVtb3J5LWF1dGhlbnRpY2F0aW9uLXRva2VuLXN0b3JhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUMsaURBQWlEOztBQUVsRDtJQUFBO1FBQ1ksWUFBTyxHQUF5RSxFQUFFLENBQUM7SUErQi9GLENBQUM7SUE3QkcsaURBQUksR0FBSixVQUFLLG1CQUEyQjtRQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFFekQsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRS9DLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ04sTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUUvQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsaURBQUksR0FBSixVQUFLLGtCQUFxRDtRQUN0RCxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDO1lBQ3BCLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztRQUN2RCxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQztZQUMxQixNQUFNLElBQUksS0FBSyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7UUFFN0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsR0FBRyxrQkFBa0IsQ0FBQztRQUU1RCxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCxtREFBTSxHQUFOLFVBQU8sbUJBQTJCO1FBQzlCLEVBQUUsQ0FBQyxDQUFDLG1CQUFtQixDQUFDO1lBQ3BCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRTdDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFDTCx5Q0FBQztBQUFELENBQUMsQUFoQ0QsSUFnQ0M7QUFoQ0Q7b0RBZ0NDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyLvu78vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9pbmRleC5kLnRzXCIgLz5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluTWVtb3J5QXV0aGVudGljYXRpb25Ub2tlblN0b3JhZ2UgaW1wbGVtZW50cyBBdXRoZW50aWNhdGlvbi5JQXV0aGVudGljYXRpb25Ub2tlblN0b3JhZ2Uge1xyXG4gICAgcHJpdmF0ZSBzdG9yYWdlOiB7IFthdXRoZW50aWNhdGlvblRva2VuOiBzdHJpbmddOiBBdXRoZW50aWNhdGlvbi5BdXRoZW50aWNhdGlvbkluZm8gfSA9IHt9O1xyXG5cclxuICAgIGZpbmQoYXV0aGVudGljYXRpb25Ub2tlbjogc3RyaW5nKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvbi5BdXRoZW50aWNhdGlvbkluZm8+IHtcclxuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uVG9rZW4pXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIkVtcHR5IGF1dGhlbnRpY2F0aW9uIHRva2VuLlwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuc3RvcmFnZVthdXRoZW50aWNhdGlvblRva2VuXTtcclxuXHJcbiAgICAgICAgaWYgKCFpbmZvKVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJUb2tlbiBpcyBpbnZhbGlkLlwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpbmZvKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlKGF1dGhlbnRpY2F0aW9uSW5mbzogQXV0aGVudGljYXRpb24uQXV0aGVudGljYXRpb25JbmZvKTogUHJvbWlzZTxBdXRoZW50aWNhdGlvbi5BdXRoZW50aWNhdGlvbkluZm8+IHtcclxuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uSW5mbylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXV0aGVudGljYXRpb25JbmZvIGlzIHVuZGVmaW5lZFwiKTtcclxuICAgICAgICBpZiAoIWF1dGhlbnRpY2F0aW9uSW5mby50b2tlbilcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXV0aGVudGljYXRpb25JbmZvLnRva2VuIGlzIHVuZGVmaW5lZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9yYWdlW2F1dGhlbnRpY2F0aW9uSW5mby50b2tlbl0gPSBhdXRoZW50aWNhdGlvbkluZm87XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXV0aGVudGljYXRpb25JbmZvKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoYXV0aGVudGljYXRpb25Ub2tlbjogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAoYXV0aGVudGljYXRpb25Ub2tlbilcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3RvcmFnZVthdXRoZW50aWNhdGlvblRva2VuXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgIH1cclxufSJdfQ==